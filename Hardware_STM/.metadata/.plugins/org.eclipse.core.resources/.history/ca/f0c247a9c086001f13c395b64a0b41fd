/*
 * sensor.h
 *
 *  Created on: Sep 10, 2024
 *      Author: AD
 *
 *  Control sensors (ICM20948)
 */

#ifndef INC_SENSOR_H_
#define INC_SENSOR_H_

#include "main.h"


typedef struct sensor_typedef {
	float error_old;
	float error_accumulate;
	float Kp;	// Proportional
	float Ki;	// Integral
	float Kd;	// Derivative
} sensor_t;


void sensors_init(I2C_HandleTypeDef* i2c_ptr, TIM_HandleTypeDef* ic_ptr, sensor_t* ss_ptr);

/*---------- Gyroscope (z-axis) Sensors ----------*/
void sensors_read_gyroZ();

/*---------- Accelerometer Sensors ----------*/
void sensors_read_accel();

/*---------- Ultrasonic Sensors ----------*/
void delay_us(TIM_HandleTypeDef* htim6_ptr, uint16_t us);
void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef* htim1_ptr, unsigned long* tc1, unsigned long* tc2, unsigned long* echo);

#endif /* INC_SENSOR_H_ */
